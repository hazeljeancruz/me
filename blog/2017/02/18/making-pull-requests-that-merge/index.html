<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=author content="Wojciech Adam Koszek"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name="p:domain_verify" content=35dedfd4f697e6e974b0ae6631ca7351 /> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/1406-fonts.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/debug.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/code.css"> <script src="https://code.jquery.com/jquery-git.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-8027537-3', 'auto');
  ga('send', 'pageview');
</script> <script>
	(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
	(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
	e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
	})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
	_st('install','_i_CdLX9xwxixHZtjxHu','2.0.0');
</script> <link rel=icon type="image/png" href="/img/favicon.ico"> <title>Making pull requests that merge</title> <meta name=description content="Making progress in a software project means accumulating changes which align well with the its plan and vision. I explain how you can be more successful at your job when making code changes, and how to improve the quality of your pull requests. "/> <meta property="og:title" content="Making pull requests that merge"/> <meta property="og:description" content="Making progress in a software project means accumulating changes which align well with the its plan and vision. I explain how you can be more successful at your job when making code changes, and how to improve the quality of your pull requests. "/> <meta property="og:image" content="http://www.koszek.com/img/2017-02-18-making-pull-requests-that-merge/stephen-crowley-110321_15p.jpg"/> <meta name="twitter:card" content=summary_large_image> <meta name="twitter:site" content="@wkoszek"/> <meta name="twitter:creator" content="@wkoszek"/> <meta name="twitter:title" content="Making pull requests that merge"/> <meta name="twitter:description" content="Making progress in a software project means accumulating changes which align well with the its plan and vision. I explain how you can be more successful at your job when making code changes, and how to improve the quality of your pull requests. "/> <meta name="twitter:image" content="http://www.koszek.com/img/2017-02-18-making-pull-requests-that-merge/stephen-crowley-110321_15p.jpg"/> <meta property="og:type" content=article /> <meta property="article:author" content="https://www.koszek.com/about"/> <meta property="article:publisher" content="https://www.koszek.com/"/> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> </head> <body> <div class=container> <div class="row noprint"> <div class="col-md-3 logo"> <a href="/">Wojciech Adam Koszek</a> </div> <div class="col-md-9 links hidden-sm hidden-xs"> <a class=in id=blog href="/">Blog</a> <a class=in id=reading href="/reading/">Reading</a> <a class=in id=papers href="/papers/">Papers</a> <a class=in id=about href="/about/">About me</a> <input class=st-default-search-input> </div> </div> <div class="row noprint"> <hr/> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/">Blog</a> </div> <div class=col-xs-4> <br> <a class=in href="/reading/">Reading</a> </div> <div class=col-xs-4> <br> </div> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/papers/">Papers</a> </div> <div class=col-xs-4> <br> <a class=in href="/about/">About</a> </div> <div class=col-xs-4> <br> <a class="hidden-lg hidden-md" href="#notes">Notes</a> </div> </div> <div class="row hidden-md hidden-lg links text-center noprint"> <br> <input class=st-default-search-input> </div> <div class=row> <div class="col-md-2 leftpanel hidden-xs hidden-sm"> </div> <div class="col-md-7 content"> <article> <h1 class=title>Making pull requests that merge</h1> <i>by Wojciech Adam Koszek</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>Feb 18, 2017</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>Menlo Park, CA</i> <br/> <br/> <b>Making progress in a software project means accumulating changes which align well with the its plan and vision. I explain how you can be more successful at your job when making code changes, and how to improve the quality of your pull requests. </b> <br/> <hr class=noprint /> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr class=noprint /> <div class=article_body> <p>The role of the software architect is to reject bad code, push back on unnecessary features and prevent the project from accumulating cruft. I use the term “software architect” here to match the professional environment, but it can apply to any independent software developer, including Open Source software engineers writing projects they love and talk about. When you make a change to the software source code, you will need to pass a judgement of a software architect. To bring your code into the project upstream, there are two angles you’ll be evaluated from: technical and social.</p> <p><img src="/img/2017-02-18-making-pull-requests-that-merge/stephen-crowley-110321_15p.jpg" alt=alt_text_1 title=Image_text_1 /> <br/> <small><small><small> <em>(Photo by <a href="https://unsplash.com/@crowleystephen">Stephen Crowley</a> via <a href="https://www.unsplash.com">Unsplash</a>)</em> </small></small></small></p> <p>Social angle isn’t very complex, as we’re talking about communicating clearly with the project leaders, and explaining why you want to make a code change. Sometimes it’s clear and obvious, for example, when you’ve made a bug fix. Paragraph or two should suffice to make your intentions apparent. If you do this properly, and you’re half done.</p> <p>Technical angle is harder. Owners have their point of view on a project, their ideas, and their plans, and you must align yourself with all of them.</p> <blockquote> <p>In the company you’ll have these wishes and work items broken down to tickets, so understanding whether you’re aligned is pretty easy. Are you working on a ticket? No? Well, you’re not aligned. I argue that contributing to software in the professional setting is easier. In the Open Source world, we rarely have work items. We’re fortunate we have a wishlist.</p> </blockquote> <p>Let’s talk about this alignment here. During our discussion let’s assume you’re attempting to bring from twenty to fifty lines of new code to my software package. Without the change, the functionality you want isn’t there. How do I evaluate your change?</p> <h2 id=why-does-author-of-a-change-matter>Why does author of a change matter?</h2> <p>New change submission is a new notification e-mail to me. Just like for every letter in your mailbox, I look at the source. Known people get more attention and higher priority, and cold-calling attempts get less. The latter happens rarely at work, within one team, and more often with Open Source. Subconciously I feel that dealing with an unknown person will be more work, so I procrastinate. If the project is mine, handling this communication is fine with me, because after all, well being of my software is my business. I must handle code change requests promptly. For the Open Source software I can say that if the contributor took the effort to make a pull request, it’s possible that the code change is fine. Maybe one percent of people do it.</p> <blockquote> <p>Note we can possibly talk about some bias here. I’d love to see someone make an experiment, and remove contributors names whatsoever. You’d receive a request for code review, but without know who it is.</p> </blockquote> <h2 id=why-keeping-small-size-is-important>Why keeping small size is important?</h2> <p>Numbers of lines you change is proportional to the time I need to spend reviewing them. Change only the lines which are absolutely required. I like very minimalistic changes, which do just one thing. It’s pretty easy to read your modification when you conform to this rule. Remember the documentation and tests, and you’re on your way to having me press “Merge” button, and getting your code incorporated. Make no changes to style in parallel with functional changes. <strong>Never</strong>. This makes the code review very hard. I really care about size, because I make most of mistakes in my software when I change too many lines at once, and I simply can’t effectively review my patches afterwards anymore.</p> <h2 id=importance-of-coding-style>Importance of coding style</h2> <p>New code must follow existing style. The reason is that inconsistency makes the software hard to maintain, and the software maintainance is the most expensive, as it lasts the longest. Do not make the maintenance hard, ever, and the authors will appreciate you.</p> <p><img src="/img/2017-02-18-making-pull-requests-that-merge/markus-spiske-109588_10p.jpg" alt=alt_text_1 title=Image_text_1 /> <br/> <small><small><small> <em>(Photo by <a href="https://unsplash.com/@markusspiske">Markus Spiske</a> via <a href="https://www.unsplash.com">Unsplash</a>)</em> </small></small></small></p> <p>If you bring many lines with mismatched style, this would make project worse as a result, and I can’t bring your change it. Style to some extent can be verified automatically, with an external tool, like <code>indent</code> for ANSI C, of <code>gofmt</code> for Go Programming Language. It’ll only catch formatting, but won’t help you with variable names or comments. You can read more about style issues in <a href="http://amzn.to/2kzYGqO">Code Complete</a> and <a href="http://amzn.to/2lVSSbe">Clean Code</a>.</p> <p>Experienced engineers are pedantic about style, and so should you, if you want to follow their ranks.</p> <h2 id=getting-to-actual-change-logic>Getting to actual change logic</h2> <p>Previous conditions I have explained in detail, but they may translate to first ten seconds of work required. The next ninenty nine percent will involve thinking through the your code. Easy changes will take a minute or less: one or two <code>if</code> conditions added. This is the type of change I’d receive for some of <a href="http://github.com/wkoszek">my hobby pet projects</a> available over GitHub. Complex changes can take me hours to analyze.</p> <h2 id=code-coverage>Code coverage</h2> <p>It’s very important that I see how you tested the code. Better yet, I’d love to get a single command to reproduce your results. First I’ll check whether the change does what you say. I will try to match the intention of your code (the social part) to the code (technical part).</p> <p>Well-managed projects will use <a href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> for testing, so this stage will be automatic. If automatic tests don’t pass, I don’t look at your change. You must ensure that everything passes (so called: “build is green”) to get attention. If you provide the tests for your new code, then it’s excellent. If the original project didn’t have any tests, try to improvise, and add something like <code>testthis.sh</code> script to verify the functionality.</p> <p>Then I’d like to see if any of the previous functionality broke, by simply running the code. This is the final step. And just like with the previous ones: the less work I need to sacrifice for your change and prove that the code works, the bigger the chances are for getting your code in.</p> <h2 id=documentation>Documentation</h2> <p>This is pretty essential. I really dislike when I see some indication of functionality I use, but when I don’t know how to invoke it. Always remember that for one writer there are one hundreds readers of code, and they will thank you for providing them hints of the functionality. Do it, and once again – chances of “Merge” button being pressed grow rapidly.</p> <h2 id=summary>Summary</h2> <p>Comments included here will make you a better expert. I believe that by following these suggestions, your pull requests will be merged faster, and you’ll progress faster in your career too. <strong>Let me know how it goes and whether you think anything is missing from this list</strong></p> <p><strong>You may also like</strong></p> <ul> <li>“<a href="http://www.koszek.com/blog/2015/06/29/how-best-companies-do-continuous-integration">How best companies do continuous integration</a>”</li> <li>“<a href="http://www.koszek.com/blog/2015/07/28/optimize-for-developers-time">Optimize for developer’s, not machine’s time</a>”</li> <li>“<a href="http://www.koszek.com/blog/2016/04/11/dont-document-automate">Don’t document. Automate!</a>”</li> <li>“<a href="http://www.koszek.com/blog/2017/02/06/how-much-software-engineer-should-invest-in-career-growth">How much software engineer should invest in career growth</a>”</li> </ul> </div> </article> <div class="row noprint"> <br> <div class="col-md-6 text-left"> </div> <div class="col-md-6 text-right"> </div> </div> <div class=noprint> <hr> <h3 id=mailing-list>Subscribe for updates</h3> <p> Once a month I send updates on the new content and hints for software engineers. <div id=mc_embed_signup class=row> <form action="//koszek.us3.list-manage.com/subscribe/post?u=0cfe70aa4cdf848b2adbd70c6&amp;id=bc454f0778" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll class=col-md-12> <input type=email value="" name=EMAIL class="required email" id=mce-EMAIL placeholder="Enter E-mail here"> <div id=mce-responses class=clear> <div class=response id=mce-error-response style="display:none"></div> <div class=response id=mce-success-response style="display:none"></div> </div> <div style="position: absolute; left: -5000px;"><input name=b_0cfe70aa4cdf848b2adbd70c6_bc454f0778 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button width="100%"></div> </div> </form> </div> </p> <hr> <b>Liked it? Share it!</b> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr> <p><br/> <strong>About the author:</strong> I’m Wojciech Adam Koszek. I like software, business and design. Poland native. In Bay Area since 2010.   <a href="/about/">More about me…</a></p> <hr> <div id=disqus_thread></div> <script>

var disqus_config = function () {
this.page.url = document.location.href.split('?')[0].split('#')[0];
this.page.identifier = this.page.url;
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//koszek.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <div class=col-md-1> </div> <div class="col-md-2 rightpanel noprint"> <br><h4>Mailing list</h4> <a href="#mailing-list">Subscribe</a> <br><h4>RSS feed</h4> <a href="http://www.koszek.com/feed.xml">RSS</a> <h4>Contact</h4> <a href="mailto:wojciech@koszek.com">E-mail</a><br> <a href="https://twitter.com/wkoszek/">Twitter</a><br> <a href="https://www.linkedin.com/in/wkoszek/">LinkedIn</a><br> <a href="https://github.com/wkoszek/">Github</a><br> <h4>Tags</h4> <span class=tag> <a href="/blog/tags/software-engineering">software engineering</a> </span> <br> <span class=tag> <a href="/blog/tags/tools">tools</a> </span> <br> <span class=tag> <a href="/blog/tags/entrepreneurship">entrepreneurship</a> </span> <br> <span class=tag> <a href="/blog/tags/productivity">productivity</a> </span> <br> </div> </div> <div class="row noprint"> <div class="col-md-12 footer"> <i>&copy;&nbsp;2012&dash;2017 Wojciech Adam Koszek (<a href="https://www.twitter.com/wkoszek/">@wkoszek</a>)</i> <br> Visits so far: <script>
var sc_project=10468040; 
var sc_invisible=0; 
var sc_security="b542d462"; 
var sc_text=2; 
var scJsHost = (("https:" == document.location.protocol) ?  "https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+ "statcounter.com/counter/counter.js'></"+"script>");
</script> <noscript> <div class=statcounter> <a title="free web stats" href="https://statcounter.com/free-web-stats/" target=_blank> <img class=statcounter src="https://c.statcounter.com/10468040/0/b542d462/0/" alt="free web stats"/></a> </div> </noscript> </div> </div> </div> <script>
        var active_page_elem = document.getElementById('active_page_name')
        var active_page_name = (active_page_elem != null ? active_page_elem.textContent : "blog");
        var active_page_link = document.getElementById(active_page_name);
        active_page_link.className = "ac";
    </script> </body> </html>